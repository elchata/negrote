package web;

import java.util.Date;
import java.util.HashMap;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import beans.Categoria; 
import beans.Medida;
import beans.Pedido;
import beans.Producto;
import service.ProductManager;


@Controller
public class InventoryController {
    
    @Autowired
    private ProductManager productManager;
    
    public void setProductManager(ProductManager productManager) {
        this.productManager = productManager;
    }    

    @RequestMapping(value="/hello.htm")
    public String printHello(ModelMap model) {  
    	String now = (new Date()).toString();
        model.addAttribute("now", now);  
        model.addAttribute("pedido", this.productManager.darPedido((long) 1));  
        return "hello";
    }
    
    //metodos para crear objetos y testear la bbdd
    public void creaMed(){
    	Medida aux=new Medida("Kilogramos", "Kg.");
    	this.productManager.guardarMedida(aux);
    }
    public void creaCat(){
    	Categoria aux=new Categoria("Verduras y Hortalizas");
    	this.productManager.guardarCategoria(aux);
    }
    public void creaProd(){
    	Producto med = new Producto("Lechuga",100);
    	med.setMedida(this.productManager.darMedida((long) 1));
    	med.getCategorias().add(this.productManager.darCategoria((long) 1));
    	this.productManager.guardarProducto(med);
    }
    
    public void creaPed(){
    	Pedido aux=new Pedido();
    	aux.setPrecioFinal(400);
    	Producto pr = this.productManager.darProducto((long) 1);
    	aux.getProductos().put(pr, 15);
    	this.productManager.guardarPedido(aux);
    }
    
}