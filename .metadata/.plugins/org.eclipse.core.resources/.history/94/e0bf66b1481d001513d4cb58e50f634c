package web;

import java.util.Date;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

import beans.Categoria; 
import beans.Medida;
import beans.Producto;
import service.ProductManager;


@Controller
public class InventoryController {
    
    @Autowired
    private ProductManager productManager;
    
    public void setProductManager(ProductManager productManager) {
        this.productManager = productManager;
    }    

    @RequestMapping(value="/hello.htm")
    public String printHello(ModelMap model) {    	
    	String now = (new Date()).toString();
    	this.creaProd();
        model.addAttribute("now", now); 
        model.addAttribute("producto", this.productManager.darProducto((long) 1)); 
        return "hello";
    }
    
    public void creaMed(){
    	Medida aux=new Medida("Kilogramos", "Kg.");
    	this.productManager.guardarMedida(aux);
    }
    public void creaProd(){
    	Producto med = new Producto("Lechuga",100);
    	med.setMedida(this.productManager.darMedida((long) 1));
    	med.getCategorias().add(new Categoria("Verduras y Hortalizas"));
    	this.productManager.guardarProducto(med);
    }
    
}